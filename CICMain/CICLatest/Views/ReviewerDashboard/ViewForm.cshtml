@{ ViewData["Title"] = "Construction firms registration form - cicf 1"; }
@model Form1Model
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<form method="post" asp-controller="ReviewerDashboard" asp-action="ViewForm">
    <section class="Cic-form-wrapper">
        <div class="cic-breadcurm">
            <ul>
                <li><a asp-controller="ReviewerDashboard" asp-action="ReviewerDashboard">Dashboard</a> <span class="delimiter"><img src="~/images/dark-right-arrow.svg" /></span></li>
                @*  <li><strong class="current-item">@ViewBag.FormTitle</strong></li>*@
                <li><strong class="current-item">Form details</strong></li>
            </ul>
        </div>
        <div class="Cic-form-content saveasdraft" id="printarea">

            <div class="">
                <div class="">
                    <h1>Form details</h1>
                    <div class="wizard">
                        <div class="wizard-inner">
                            <div class="connecting-line"></div>
                            <ul class="nav nav-tabs" role="tablist">
                                <li role="presentation" class="active">
                                    <a href="#TypeofApplication" data-toggle="tab" aria-controls="TypeofApplication" role="tab" aria-expanded="false">Type of Application</a>
                                </li>

                                <li role="presentation">
                                    <a href="#BusinessDetails" data-toggle="tab" aria-controls="BusinessDetails" role="tab" aria-expanded="false"> Business Details</a>
                                </li>

                                <li role="presentation">
                                    <a href="#FinancialCapability" data-toggle="tab" aria-controls="FinancialCapability" role="tab"> Financial Capability</a>
                                </li>
                                @*<li role="presentation">
                                         <a href="#WorksCapability" data-toggle="tab" aria-controls="WorksCapability" role="tab">Works Capability</a>
                                    </li>*@
                                <li role="presentation">
                                    <a href="#DocumentUpload" data-toggle="tab" aria-controls="DocumentUpload" role="tab">Document Upload</a>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-content saveasdraft-content">
                            <div class="tab-pane active" role="tabpanel" id="TypeofApplication">
                                <div class="fieldset">
                                    <div class="row">
                                        <div class="col-lg form-group">Type of Application</div>
                                        <div class="col-lg form-group vals">@Model.AppType</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Association Name</div>
                                        <div class="col-lg form-group vals">@Model.AssociationName</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Name of Authorised Officer</div>
                                        <div class="col-lg form-group vals">@Model.AuthorisedOfficerName</div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" role="tabpanel" id="BusinessDetails">
                                <div class="fieldset">
                                    <div class="row">
                                        <div class="col-lg form-group">Business Names</div>
                                        <div class="col-lg form-group vals">@Model.BusinessName</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Trading Style</div>
                                        <div class="col-lg form-group vals">@Model.TradingStyle</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">BusinessType</div>
                                        <div class="col-lg form-group vals">@Model.BusinessType</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Date of Registration of Company</div>
                                        <div class="col-lg form-group vals">@Model.CompanyRegistrationDate</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Place of Registration of Company</div>
                                        <div class="col-lg form-group vals">@Model.CompanyRegistrationPlace</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Company Registration Number</div>
                                        <div class="col-lg form-group vals">@Model.CompanyRegistrationNumber</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Physical Address in Eswatini</div>
                                        <div class="col-lg form-group vals">@Model.PhysicalAddress</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Company Head Office Physical Address</div>
                                        <div class="col-lg form-group vals">@Model.CompanyHOPhysicalAddress</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Postal Address</div>
                                        <div class="col-lg form-group vals">@Model.PostalAddress</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Telephone No</div>
                                        <div class="col-lg form-group vals">@Model.TelephoneNumber</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Fax</div>
                                        <div class="col-lg form-group vals">@Model.FaxNo</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Email</div>
                                        <div class="col-lg form-group vals"><label id="Email">@Model.Email</label></div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Category of Works Applying for</div>
                                        <div class="col-lg form-group vals">@Model.Category</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Present Grade Registered for</div>
                                        <div class="col-lg form-group vals"></div>
                                    </div>
                                    <div>
                                        <h5>Business Representative</h5>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Name</div>
                                        <div class="col-lg form-group vals" id="RepresentativeName">@Model.BusinessRepresentativeName</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Position</div>
                                        <div class="col-lg form-group vals">@Model.BusinessRepresentativePositionNumber</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Cell No</div>
                                        <div class="col-lg form-group vals">@Model.BusinessRepresentativeCellNo</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Fax</div>
                                        <div class="col-lg form-group vals">@Model.BusinessRepresentativeFax</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Email</div>
                                        <div class="col-lg form-group vals">@Model.BusinessRepresentativeEmail</div>
                                    </div>
                                    <div class="table-fieldset">
                                        <div class="table-responsive-lg" style="overflow-x:auto;">
                                            <table class="table table-bordered" id="tblShare">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">Name ofDirector(s)/Partners</th>
                                                        <th scope="col">Nationality</th>
                                                        <th scope="col">ID/Passport No.</th>
                                                        <th scope="col">Country of Residence</th>
                                                        <th scope="col">Cellphone No.</th>
                                                        <th scope="col">% Shares</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="tbody">
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" role="tabpanel" id="FinancialCapability">
                                <div class="fieldset">
                                    <div class="row">
                                        <div class="col-lg form-group">Financial Year 1 end Total Turnover</div>
                                        <div class="col-lg form-group vals">@Model.AnnualTurnoverYear1</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Financial Year 2 end Total Turnover</div>
                                        <div class="col-lg form-group vals">@Model.AnnualTurnoverYear2</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Financial Year 3 end Total Turnover</div>
                                        <div class="col-lg form-group vals">@Model.AnnualTurnoverYear3</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Financial Value of surety if any: E</div>
                                        <div class="col-lg form-group vals">@Model.FinancialValue</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Indicate the name of the Financial Institution(s)</div>
                                        <div class="col-lg form-group vals">@Model.FinancialInstitutionName</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg form-group">Available Capital E</div>
                                        <div class="col-lg form-group vals">@Model.AvailableCapital</div>
                                    </div>
                                </div>
                            </div>
                            @*<div class="tab-pane" role="tabpanel" id="WorksCapability">
                                    <div class="fieldset">
                                    </div>
                                </div>*@
                            <div class="tab-pane" role="tabpanel" id="DocumentUpload">
                                <div class="listofdoc">
                                    List of documents
                                </div>
                                <div class="form-group">
                                    <label for="comment">Comment:</label>
                                    <textarea class="form-control" name="comment" rows="5" id="comment"></textarea>
                                </div>
                                <ul class="">
                                    <li>
                                        @*<a href="#" data-toggle="modal" data-target="#acceptForm" class="btn btn-submit">Approve Form</a>*@
                                        <button type="submit" class="btn btn-submit">Approve</button>
                                        <button type="button" class="btn btn-reject" onclick="submitForm('Reject');">Reject</button>
                                    </li>
                                </ul>
                            </div>



                        </div>

                        @*<div class="backbtn">
                                <a asp-controller="ReviewerDashboard" asp-action="ReviewerDashboard"> <img src="/images/right-arrow.svg" alt="arrow" /> Back to Dashboard</a>
                            </div>*@
                    </div>
                </div>
            </div>

        </div>

    </section>


    <div class="modal fade" id="acceptForm" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <div class="modal-body">
                    <p>Do you want to approve Form?</p>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-submit" data-dismiss="modal">Approve</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    </div>

                </div>
            </div>
        </div>
    </div>
</form>
<script type="text/javascript">
    function submitForm(x) {
        var label = $('#Email');
        var email = label.text();
        var RepresentativeName = $('#RepresentativeName').text();
        var comment = document.getElementById('comment').value;

        $.ajax({
            type: 'POST',
            url: "@(Url.Action("RejectForm", "ReviewerDashboard"))",
            data: { "value": x, "emailId": email, "RepresentativeName": RepresentativeName, "comment": comment},
            success: function (result) {
               // alert('Successfully received Data ');
                window.location.href = '/ReviewerDashboard/ReviewerDashboard';
                console.log(result);
            },
            error: function () {
               // alert('Failed to receive the Data');
                console.log('Failed ');
            }
        })
    }


</script>